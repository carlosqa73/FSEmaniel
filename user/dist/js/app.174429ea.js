(function(e){function t(t){for(var a,n,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&f.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},i={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0266":function(e,t,r){},"034f":function(e,t,r){"use strict";r("85ec")},"30b1":function(e,t,r){"use strict";r("8051")},"52fe":function(e,t,r){"use strict";r("aa72")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("NewsCarousel")],1)},o=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-carousel",{attrs:{interval:0,type:"card",height:"51vh"}},e._l(e.items,(function(t,a){return r("el-carousel-item",{key:a},[r("b-card",{staticClass:"mb-2",attrs:{"img-top":""}},[r("img",{staticClass:"img-product",attrs:{src:t.imagen}}),r("p",[e._v(e._s(t.titulo))]),r("b-button",{attrs:{href:"#",variant:"primary"},on:{click:function(r){return e.$bvModal.show(t.titulo)}}},[e._v("Ver")])],1),r("b-modal",{attrs:{id:t.titulo,"hide-footer":""}},[r("div",{staticClass:"d-block text-center"},[r("h3",[e._v(e._s(t.titulo))]),r("img",{attrs:{src:t.imagen,width:"100%"}}),r("p",[e._v(e._s(t.contenido))])]),r("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(r){return e.$bvModal.hide(t.titulo)}}},[e._v("Cerrar")])],1)],1)})),1)},s=[],l=(r("d3b7"),{name:"NewsCarousel",created:function(){this.getNoticias()},data:function(){return{items:[]}},methods:{getNoticias:function(){var e=this;fetch("https://server-emaniel.herokuapp.com/noticias").then((function(e){return e.json()})).then((function(t){e.items=t})).catch((function(e){console.log(e)}))}}}),c=l,u=(r("c1f3"),r("2877")),d=Object(u["a"])(c,n,s,!1,null,null,null),f=d.exports,p={name:"App",components:{NewsCarousel:f}},v=p,m=(r("034f"),Object(u["a"])(v,i,o,!1,null,null,null)),h=m.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ProductsCarousel")},g=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-carousel",{staticClass:"carousel",attrs:{interval:0,type:"card",height:"51vh"}},e._l(e.items1,(function(t,a){return r("el-carousel-item",{key:a,staticClass:"carousel-item"},[r("b-card",{staticClass:"mb-2 card-item",attrs:{"img-top":""}},[r("img",{staticClass:"img-product",attrs:{src:t.imagen}}),r("p",{staticClass:"nombre"},[e._v(e._s(t.descripcion)+": $"+e._s(t.precio))]),r("b-button",{attrs:{href:"#",variant:"primary"},on:{click:function(r){return e.$bvModal.show(t.id)}}},[e._v("Ver")])],1),r("b-modal",{attrs:{id:t.id,"hide-footer":""}},[r("div",{staticClass:"d-block text-center"},[r("h3",[e._v(e._s(t.descripcion))]),r("img",{attrs:{src:t.imagen,width:"100%"}}),r("p",[e._v(e._s(t.descripcion))]),r("p",[e._v("$"+e._s(t.precio))])]),r("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:function(r){return e.agregarAlCarrito(t.id)}}},[e._v("Agregar al carro")])],1)],1)})),1),r("el-carousel",{staticClass:"carousel",attrs:{interval:0,type:"card",height:"51vh"}},e._l(e.items2,(function(t,a){return r("el-carousel-item",{key:a,staticClass:"carousel-item"},[r("b-card",{staticClass:"mb-2 card-item",attrs:{"img-top":""}},[r("img",{staticClass:"img-product",attrs:{src:t.imagen}}),r("p",{staticClass:"nombre"},[e._v(e._s(t.descripcion)+": $"+e._s(t.precio))]),r("b-button",{attrs:{href:"#",variant:"primary"},on:{click:function(r){return e.$bvModal.show(t.id)}}},[e._v("Ver")])],1),r("b-modal",{attrs:{id:t.id,"hide-footer":""}},[r("div",{staticClass:"d-block text-center"},[r("h3",[e._v(e._s(t.descripcion))]),r("img",{attrs:{src:t.imagen,width:"100%"}}),r("p",[e._v(e._s(t.descripcion))]),r("p",[e._v("$"+e._s(t.precio))])]),r("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:function(r){return e.agregarAlCarrito(t.id)}}},[e._v("Agregar al carro")])],1)],1)})),1)],1)},_=[],k=(r("fb6a"),{name:"NewsCarousel",created:function(){this.getProductos()},data:function(){return{items1:[],items2:[]}},methods:{agregarAlCarrito:function(e){this.$eventBus.$emit("agregar-al-carrito",e),this.$bvModal.hide(e)},getProductos:function(){var e=this;fetch("https://server-emaniel.herokuapp.com/productos").then((function(e){return e.json()})).then((function(t){var r=Math.floor(t.length/2);e.items1=t.slice(0,r),e.items2=t.slice(r)})).catch((function(e){console.log(e)}))}}}),C=k,y=(r("b5e5"),Object(u["a"])(C,w,_,!1,null,null,null)),P=y.exports,x={name:"App2",components:{ProductsCarousel:P},devServer:{disableHostCheck:!0}},M=x,U=(r("7361"),Object(u["a"])(M,b,g,!1,null,null,null)),$=U.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Avatar")},S=[],A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"container"}},[r("img",{attrs:{src:"assets/img/user.png",width:"30",alt:"User"}}),r("b-dropdown",{attrs:{size:"sm",variant:"primary",text:""}},[r("b-dropdown-item",{attrs:{href:"#"},on:{click:e.loginHandler},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[e._v(" "+e._s(e.status)+" ")])],1),r("img",{attrs:{src:"assets/img/cart.ico",width:"40",alt:"Carro"},on:{click:e.carritoHandler}}),r("b-badge",{attrs:{pill:"",variant:"danger"},model:{value:e.countProductos,callback:function(t){e.countProductos=t},expression:"countProductos"}},[e._v(e._s(e.countProductos))]),r("b-modal",{attrs:{id:"modal-carrito","ok-title":"Aceptar","hide-footer":"","cancel-title":"Cancelar",title:"Carrito"}},[r("b-badge",{attrs:{variant:"info"},model:{value:e.totalProductos,callback:function(t){e.totalProductos=t},expression:"totalProductos"}},[e._v("Total: $"+e._s(e.totalProductos))]),r("div",[r("b-table",{attrs:{selectable:"","select-mode":"single",hover:"",fields:e.campos,items:e.items},on:{"row-clicked":e.selectItemHandler}})],1),r("b-button",{ref:"btnOk",attrs:{variant:"primary"},on:{click:e.comprarHandler}},[e._v("Comprar")]),r("b-button",{ref:"btnOk",attrs:{variant:"danger"},on:{click:e.deleteItemHandler}},[e._v("Eliminar")])],1),r("b-modal",{attrs:{id:"modal-login","ok-title":"Aceptar","hide-footer":"","cancel-title":"Cancelar",title:"Iniciar sesión"}},[r("b-form",[r("b-form-group",{attrs:{id:"group-usuario",label:"Correo","label-for":"input-usuario"}},[r("b-form-input",{attrs:{id:"input-usuario",type:"email",placeholder:"Ingrese su correo",required:"",state:e.validarMailLogin},model:{value:e.usuario,callback:function(t){e.usuario=t},expression:"usuario"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarMailLogin}},[e._v(" Este campo es obligatorio. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarMailLogin}})],1),r("b-form-group",{attrs:{id:"group-clave",label:"Contraseña","label-for":"input-clave"}},[r("b-form-input",{attrs:{id:"input-clave",type:"password",placeholder:"Ingrese su contraseña",required:"",state:e.validarClaveLogin},model:{value:e.clave,callback:function(t){e.clave=t},expression:"clave"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarClaveLogin}},[e._v(" Este campo es obligatorio. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarClaveLogin}})],1),r("b-button",{ref:"btnOk",attrs:{variant:"primary"},on:{click:e.okHandler}},[e._v("Entrar")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Limpiar")]),r("b-form-group",{attrs:{id:"group-new",label:"¿No tiene cuenta?"}},[r("b-button",{attrs:{variant:"primary"},on:{click:e.newCuenta}},[e._v("Registrarse")])],1)],1)],1),r("b-modal",{attrs:{id:"modal-registro",title:"Crear cuenta","hide-footer":""}},[r("form-wizard",{attrs:{color:"#fed136",title:"",subtitle:"","step-size":"sm","back-button-text":"Atrás","finish-button-text":"Finalizar","next-button-text":"Siguiente"},on:{"on-complete":e.registroFinalizado}},[r("tab-content",{attrs:{title:"Detalles personales","before-change":e.validarPrimerPaso}},[r("b-form",{attrs:{id:"form-step1"}},[r("b-form-group",{attrs:{id:"group-nombre",label:"Nombre:","label-for":"input-nombre"}},[r("b-form-input",{attrs:{id:"input-nombre",placeholder:"Ingrese su nombre",required:"",state:e.validarNombre},model:{value:e.newUser.nombre,callback:function(t){e.$set(e.newUser,"nombre",t)},expression:"newUser.nombre"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarNombre}},[e._v(" Este campo es obligatorio. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarNombre}})],1),r("b-form-group",{attrs:{id:"group-apellido",label:"Apellido:","label-for":"input-apellido"}},[r("b-form-input",{attrs:{id:"input-apellido",placeholder:"Ingrese su apellido",required:"",state:e.validarApellido},model:{value:e.newUser.apellido,callback:function(t){e.$set(e.newUser,"apellido",t)},expression:"newUser.apellido"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarApellido}},[e._v(" Este campo es obligatorio. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarApellido}})],1),r("b-form-group",{attrs:{id:"group-mail",label:"Correo electrónico:","label-for":"input-mail"}},[r("b-form-input",{attrs:{id:"input-mail",type:"email",placeholder:"Ingrese su correo",required:"",state:e.validarMail},model:{value:e.newMail.correo,callback:function(t){e.$set(e.newMail,"correo",t)},expression:"newMail.correo"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarMail}},[e._v(" Ingrese una dirección de correo válida. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarMail}})],1)],1)],1),r("tab-content",{attrs:{title:"Información adicional","before-change":e.validarSegundoPaso}},[r("b-form",{attrs:{id:"form-step2"}},[r("b-form-group",{attrs:{id:"group-direccion",label:"Dirección:","label-for":"input-direccion"}},[r("b-form-input",{attrs:{id:"input-direccion",placeholder:"Ingrese su dirección",required:"",state:e.validarDireccion},model:{value:e.newUser.direccion,callback:function(t){e.$set(e.newUser,"direccion",t)},expression:"newUser.direccion"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarDireccion}},[e._v(" Este campo es obligatorio. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarDireccion}})],1),r("b-form-group",{attrs:{id:"group-new-clave",label:"Contraseña:","label-for":"input-new-clave"}},[r("b-form-input",{attrs:{id:"input-new-clave",type:"password",placeholder:"Ingrese una contraseña",required:"",state:e.validarClave},model:{value:e.newUser.clave,callback:function(t){e.$set(e.newUser,"clave",t)},expression:"newUser.clave"}}),r("b-form-invalid-feedback",{attrs:{state:e.validarClave}},[e._v(" La contraseña debe tener entre 5 y 12 carácteres. ")]),r("b-form-valid-feedback",{attrs:{state:e.validarClave}})],1),r("b-form-group",{attrs:{id:"group-verificar-clave",label:"Verificar contraseña:","label-for":"input-new-clave2"}},[r("b-form-input",{attrs:{id:"input-new-clave2",type:"password",placeholder:"Ingrese de nuevo la contraseña",required:"",state:e.verificarClave},model:{value:e.claveAux,callback:function(t){e.claveAux=t},expression:"claveAux"}}),r("b-form-invalid-feedback",{attrs:{state:e.verificarClave}}),r("b-form-valid-feedback",{attrs:{state:e.verificarClave}},[e._v(" Las contraseñas coinciden. ")])],1)],1)],1),r("tab-content",{attrs:{title:"Finalizar"}},[r("div",{attrs:{id:"success"}},[r("img",{attrs:{src:"assets/img/success.png",alt:"Sucess"}}),r("p",[e._v("¡Ha completado todos los pasos!")])])])],1)],1)],1)},I=[],j=(r("4160"),r("caad"),r("a434"),r("2532"),r("159b"),{name:"Avatar",data:function(){return{data:{usuario:"",clave:""},status:"Iniciar sesión",usuario:"",clave:"",newUser:{nombre:"",apellido:"",clave:"",tipoUsuario:"customer",direccion:""},newMail:{idUsuario:"",correo:""},user:{},countProductos:0,totalProductos:0,claveAux:"",campos:["Id","Descripción","Precio"],items:[],itemSelected:null}},created:function(){this.$eventBus.$on("agregar-al-carrito",this.agregarHandler)},methods:{comprarHandler:function(){var e=this;0!=this.countProductos&&("Iniciar sesión"==this.status?this.$bvModal.show("modal-login"):(this.items.forEach((function(t){var r={usuario:e.user.id,producto:t.Id,fecha:new Date,cantidad:1};fetch("https://server-emaniel.herokuapp.com/compras/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){console.log(e)})).catch((function(e){alert(e)}))})),this.countProductos=0,this.totalProductos=0,this.itemSelected=null,this.items=[]))},buscarItem:function(e){var t=0;this.items.forEach((function(r){if(r.Id==e)return t;t++}))},deleteItemHandler:function(){if(null!=this.itemSelected){var e=this.buscarItem(this.itemSelected.Id);this.items.splice(e,1),this.totalProductos-=this.itemSelected.Precio,this.countProductos--,this.itemSelected=null}},selectItemHandler:function(e){this.itemSelected=e},agregarHandler:function(e){var t=this;fetch("https://server-emaniel.herokuapp.com/productos/find/"+e,{method:"POST"}).then((function(e){return e.json()})).then((function(e){var r={Id:e.id,"Descripción":e.descripcion,Precio:e.precio};t.items.push(r),t.countProductos++,t.totalProductos+=e.precio}))},okHandler:function(){var e=this,t=this.usuario.includes("@")&&(this.usuario.includes(".com")||this.usuario.includes(".edu")),r=this.clave.length>=5&&this.clave.length<=12;t&&r&&(this.data.usuario=this.usuario,this.data.clave=this.clave,this.usuario="",this.clave="",this.$bvModal.hide("modal-login"),fetch("https://server-emaniel.herokuapp.com/correos/findByDireccion/"+this.data.usuario,{method:"POST"}).then((function(e){return e.json()})).then((function(t){if("Sin resultados"!=t){var r=t.idUsuario;fetch("https://server-emaniel.herokuapp.com/usuarios/find/"+r,{method:"POST"}).then((function(e){return e.json()})).then((function(t){"Sin resultados"!=t&&(e.user=t,t.clave==e.data.clave?(e.status="Cerrar sesión",alert("Bienvenido "+t.nombre)):alert("Clave incorrecta"))}))}})).catch((function(e){alert("Usuario no registrado"),console.log(e)})))},carritoHandler:function(){this.$bvModal.show("modal-carrito")},loginHandler:function(){"Iniciar sesión"==this.status?this.$bvModal.show("modal-login"):(this.status="Iniciar sesión",alert(JSON.stringify(this.user)))},newCuenta:function(){this.$bvModal.hide("modal-login"),this.$bvModal.show("modal-registro")},validarPrimerPaso:function(){var e=this.newMail.correo.includes("@")&&(this.newMail.correo.includes(".com")||this.newMail.correo.includes(".edu"));return e&&""!=this.newUser.apellido&&""!=this.newUser.nombre},validarSegundoPaso:function(){var e=this.newUser.clave.length>=5&&this.newUser.clave.length<=12,t=this.newUser.clave==this.claveAux;return e&&t&&""!=this.newUser.direccion},registroFinalizado:function(){var e=this;this.$bvModal.hide("modal-registro"),fetch("https://server-emaniel.herokuapp.com/usuarios/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.newUser)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.newMail.idUsuario=t.id,fetch("https://server-emaniel.herokuapp.com/correos/save",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.newMail)}).then((function(t){console.log(t),alert("Usuario registrado"),e.newUser.nombre="",e.newUser.apellido="",e.newUser.clave="",e.newMail.correo="",e.newMail.idUsuario="",e.newUser.direccion="",e.claveAux=""})).catch((function(e){alert("No se pudo registrar el correo\n"+e)}))})).catch((function(e){alert("No se pudo registrar el usuario\n"+e)}))}},computed:{validarMailLogin:function(){return this.usuario.includes("@")&&(this.usuario.includes(".com")||this.usuario.includes(".edu"))},validarClaveLogin:function(){return this.clave.length>=5&&this.clave.length<=12},validarNombre:function(){return""!=this.newUser.nombre},validarApellido:function(){return""!=this.newUser.apellido},validarMail:function(){return this.newMail.correo.includes("@")&&(this.newMail.correo.includes(".com")||this.newMail.correo.includes(".edu"))},validarClave:function(){return this.newUser.clave.length>=5&&this.newUser.clave.length<=12},verificarClave:function(){return this.newUser.clave==this.claveAux&&""!=this.claveAux},validarDireccion:function(){return""!=this.newUser.direccion}}}),N=j,H=(r("52fe"),Object(u["a"])(N,A,I,!1,null,null,null)),E=H.exports,T={name:"AppAvatar",components:{Avatar:E}},L=T,D=(r("30b1"),Object(u["a"])(L,O,S,!1,null,null,null)),q=D.exports,z=r("5c96"),J=r.n(z),B=(r("0fae"),r("2ee4")),F=r.n(B),V=(r("da93"),r("5f5b")),R=r("b1e0");a["default"].prototype.$eventBus=new a["default"],a["default"].use(V["a"]),a["default"].use(R["a"]),a["default"].use(J.a),a["default"].use(F.a),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e($)}}).$mount("#app2"),new a["default"]({render:function(e){return e(h)}}).$mount("#app"),new a["default"]({render:function(e){return e(q)}}).$mount("#avatar")},"72bf":function(e,t,r){},7361:function(e,t,r){"use strict";r("a95c")},8051:function(e,t,r){},"85ec":function(e,t,r){},a95c:function(e,t,r){},aa72:function(e,t,r){},b5e5:function(e,t,r){"use strict";r("72bf")},c1f3:function(e,t,r){"use strict";r("0266")}});
//# sourceMappingURL=app.174429ea.js.map